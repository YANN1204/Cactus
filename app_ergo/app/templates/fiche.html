{% extends 'layout.html' %} {% block content %}

<link rel="stylesheet" type="text/css" href="/static/fiches.css">
<!-- Inclure jQuery et Bootstrap -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.1/css/bootstrap.min.css" integrity="sha512-e+I5q3MP5WzzXd+nLJ/PFzgIlpUNr47avdRRDhxYv1c2QF0xfxLlCfZEDlKPTe5CpP9r8nLdEZDvYwON2QeBxw==" crossorigin="anonymous" referrerpolicy="no-referrer"
/>




<div class="section-h1">
    <h1>Fiches {% if data["type_of_card"] == "1" %} pratique {% elif data["type_of_card"] == "3" %} conseil {% else %} tÃ©moignage {% endif %}</h1>
</div>

<div class="container-fluid">

    <h2>{{ data['title'] }} </h2>

    <div class="div-tags pratique">
        <span> {{ data['room_name'] }} </span> {% for tag in data['tags_name'] %}
        <span> {{ tag }} </span> {% endfor %}
    </div>

    <!--- affichage des onglets et contenu -->

    <!--- pratique -->
    {% if data["type_of_card"] == "1" %}
    <div>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="description-tab" data-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="true">Description</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="tuto-tab" data-toggle="tab" href="#tuto" role="tab" aria-controls="tuto" aria-selected="false">Tuto</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="materiel-tab" data-toggle="tab" href="#materiel" role="tab" aria-controls="materiel" aria-selected="false">Materiel</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="impact-tab" data-toggle="tab" href="#impact" role="tab" aria-controls="impact" aria-selected="false">Impact</a></li>
            <li class="nav-item">
                <a class="nav-link" id="avis-tab" data-toggle="tab" href="#avis" role="tab" aria-controls="avis" aria-selected="false">Avis</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                <div class="row">
                    <div class="col-5">
                        <div class="div-pin dark">
                            <img src="./static/Images/left-clear-clip.png" alt="trombone">
                            <p><i class="fa-regular fa-clock"></i>{{ data["duration_exact"]}}minutes</p>
                            <p>{% for i in range(data["cost"]|int) %} <i class="fa-solid fa-euro-sign"></i> {% endfor %}</p>
                            <p>Ce qu'il faut savoir : {{ data["what_we_need_to_know"]}}</p>
                        </div>
                        <div class="div-pin clear">
                            <img src="./static/Images/left-dark-clip.png" alt="trombone">
                            <div class="row">
                                <div class="col-3">
                                    <img src="./static/Images/love-earth.png" alt="planete terre avec coeur">
                                </div>
                                <div class="col">
                                    <p>{{ data["impact"]}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade" id="mod">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <p> EntÃªte du pop-up </p>
                                </div>
                                <div class="modal-body">
                                    <p> Je suis un magnifique pop-up</p>
                                </div>
                                <div class="modal-footer">
                                    <p> Footer du pop-up</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <p>{{ data["description"]}}</p>
                        {% if adopted == false%}
                        <form method="GET" data-bs-toggle="modal" data-bs-target="#mod" action="{{ url_for('button_click_adopt',idFiche=idFiche) }}">
                            <button type="submit" class="btn btn-primary btn-adopt">J'adopte cette pratique !</button>
                            <input type="hidden" name="idFiche" value="{{ idFiche }}">
                        </form>
                        {% endif %} {% if adopted == true %}
                        <form method="GET" data-bs-toggle="modal" data-bs-target="#mod" action="{{ url_for('button_click_unadopt',idFiche=idFiche) }}">
                            <button type="submit" class="btn btn-primary btn-adopt">Je n'adopte plus cette pratique</button>
                            <input type="hidden" name="idFiche" value="{{ idFiche }}">
                        </form>
                        {% endif %}

                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="tuto" role="tabpanel" aria-labelledby="tuto-tab">
                <p>{{ data["astuce_or_step_tuto"]}}</p>
            </div>
            <div class="tab-pane fade" id="materiel" role="tabpanel" aria-labelledby="materiel-tab">
                <p>Ce qu'il vous faudra : {{ data["material"]}}</p>
                <p>OÃ¹ trouver le matÃ©riel : {{ data["position"] }}</p>
            </div>
            <div class="tab-pane fade" id="impact" role="tabpanel" aria-labelledby="impact-tab">
                <p>{{ data["impact"]}}</p>
            </div>
            <div class="tab-pane fade" id="avis" role="tabpanel" aria-labelledby="avis-tab">
                <p>J'ai pas trouvÃ© dans Directus les avis ðŸ˜¢</p>
            </div>
        </div>
    </div>

    <!--- conseil -->
    {% elif data["type_of_card"] == "3" %}
    <div>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="description-tab" data-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="true">Description</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="astuce-tab" data-toggle="tab" href="#astuce" role="tab" aria-controls="tuto" aria-selected="false">Astuce</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="impact-tab" data-toggle="tab" href="#impact" role="tab" aria-controls="impact" aria-selected="false">Impact</a></li>

        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                <p>{{ data["description"]}}</p>
                <p>{{ data["impact"]}}</p>
                <p>Ce qu'il faut savoir : {{ data["what_we_need_to_know"]}}</p>
            </div>
            <div class="tab-pane fade" id="astuce" role="tabpanel" aria-labelledby="astuce-tab">
                <p>{{ data["astuce_or_step_tuto"]}}</p>
            </div>
            <div class="tab-pane fade" id="impact" role="tabpanel" aria-labelledby="impact-tab">
                <p>{{ data["impact"]}}</p>
            </div>
        </div>
    </div>

    <!--- tÃ©moignage -->
    {% else %}
    <div>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="description-tab" data-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="true">Description</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="temoignage-tab" data-toggle="tab" href="#temoignage" role="tab" aria-controls="temoignage" aria-selected="false">TÃ©moignage</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="impact-tab" data-toggle="tab" href="#impact" role="tab" aria-controls="impact" aria-selected="false">Impact</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                <p>{{ data["description"]}}</p>
                <p>{{ data["impact"]}}</p>
                <p>Ce qu'il faut savoir : {{ data["what_we_need_to_know"]}}</p>
            </div>
            <div class="tab-pane fade" id="temoignage" role="tabpanel" aria-labelledby="temoignage-tab">
                <p>""{{ data["astuce_or_step_tuto"]}}""</p>
            </div>
            <div class="tab-pane fade" id="impact" role="tabpanel" aria-labelledby="impact-tab">
                <p>{{ data["impact"]}}</p>
            </div>
        </div>
    </div>
    {% endif %}

</div>

<!-- VÃ©rifier la valeur de la variable Flask et afficher la modale en consÃ©quence -->
{% if adopte %}
<script>
    $(document).ready(function() {
        $('#mod').modal('show');
    });
</script>
{% endif %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>

{% endblock %}